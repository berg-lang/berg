require "bundler/setup"
require "berg_lang/string_source"
require "berg_lang/parser"
require "pp"

if ARGV[0] == "-e"
    filename = "-e"
    str = ARGV[1]
else
    str = IO.read(ARGV[0])
end
parser = BergLang::Parser.new
source = BergLang::StringSource.new("<argument>", str)
syntax_tree = parser.parse(source)
puts "\n"
puts str
puts "---"
puts syntax_tree.root.expression_to_s
